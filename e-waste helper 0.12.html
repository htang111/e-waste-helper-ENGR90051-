<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>City of Melbourne — E‑Waste Helper (Offline)</title>
  <style>
    :root{
      --bg:#ffffff; --card:#ffffff; --ink:#111111; --muted:#444444;
      --accent:#f5b7c8; --accent2:#fbe1ea; --warn:#ffbf69; --line:#e9e9e9
    }
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.5 system-ui,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--ink)}
    header{padding:28px 16px;text-align:center;background:linear-gradient(180deg,#fde8ef 0,#fff 100%);border-bottom:1px solid var(--line)}
    header h1{margin:0 0 8px;font-weight:800;letter-spacing:.2px}
    header p{margin:0;color:#333}
    main{max-width:980px;margin:0 auto;padding:12px 16px 80px}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:0 6px 18px rgba(17,17,17,.06);padding:18px}
    .stack{display:grid;gap:14px}
    .row{display:flex;flex-wrap:wrap;gap:8px}
    .btn{appearance:none;border:1px solid var(--line);background:#fff;color:var(--ink);padding:10px 14px;border-radius:12px;cursor:pointer}
    .btn:hover{border-color:var(--accent);box-shadow:0 0 0 2px rgba(245,183,200,.25) inset}
    .btn.primary{background:linear-gradient(135deg,var(--accent),#ffcee0);border-color:transparent;color:#111}
    .btn.ghost{border-style:dashed}
    .btn.small{padding:6px 10px;font-size:.9rem}
    .step h2{margin:0 0 6px;font-size:1.15rem}
    .hint{color:#555;font-size:.95rem}
    fieldset{border:0;margin:0;padding:0}
    label.opt{display:flex;gap:10px;align-items:flex-start;border:1px solid var(--line);padding:12px;border-radius:14px;cursor:pointer}
    label.opt:hover{border-color:var(--accent);background:#fff6fa}
    label.opt input{accent-color:#ff6fa6}
    .pill{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid var(--line);font-size:.8rem;color:#555}
    .grid{display:grid;gap:10px}
    @media (min-width:720px){.grid.cols-2{grid-template-columns:1fr 1fr}}
    .result{border:1px solid var(--line);border-radius:16px;padding:14px;background:#fff}
    .loc{display:flex;gap:10px;align-items:flex-start;border:1px solid var(--line);padding:12px;border-radius:12px;background:#fff}
    .loc h4{margin:0 0 4px}
    .loc p{margin:0;color:#555}
    .badge{font-weight:700;letter-spacing:.2px}
    .ok{color:#1a7f37}
    .warn{color:#c97a00}
    .footer{margin-top:16px;color:#555;font-size:.9rem}
    details{background:#fff;padding:10px;border:1px solid var(--line);border-radius:12px}
    summary{cursor:pointer}
    .sr{position:absolute;left:-9999px}
    .callout{border-left:4px solid var(--accent);padding:10px 12px;background:#fff6fa;border:1px solid var(--line);border-radius:10px}
    .alert{border-left:4px solid var(--warn)}
    a{color:#d63b82}
  </style>
</head>
<body>
  <header>
    <h1>City of Melbourne — E‑Waste Helper</h1>
    <p>Answer a short set of questions to find the correct disposal pathway for your electronic items within the City of Melbourne.</p>
  </header>
  <main class="stack">
    <section class="card stack" aria-labelledby="flow-title">
      <h2 id="flow-title" class="sr">Decision flow</h2>

      <!-- Step 1: Category -->
      <div class="step stack" id="step1">
        <h2>1) What type of item is it?</h2>
        <p class="hint">E‑waste is any item with a plug, cord or battery.</p>
        <fieldset class="grid cols-2" id="catField">
          <!-- options are generated in JS -->
        </fieldset>
      </div>

      <!-- Step 2: Size -->
      <div class="step stack" id="step2" hidden>
        <h2>2) Roughly how big is it?</h2>
        <p class="hint">This helps decide where to drop it off.</p>
        <fieldset class="grid cols-2" id="sizeField"></fieldset>
        <div class="row">
          <button class="btn ghost small" id="back1">Back</button>
        </div>
      </div>

      <!-- Step 3: Location -->
      <div class="step stack" id="step3" hidden>
        <h2>3) Where in the City of Melbourne are you?</h2>
        <p class="hint">Choose a suburb (or try device location if you prefer).</p>
        <div class="row">
          <select id="suburb" class="btn" aria-label="Choose your suburb"></select>
          <button class="btn ghost" id="geoBtn" title="Use device location (optional)">Use my device location</button>
        </div>
        <div class="row">
          <button class="btn ghost small" id="back2">Back</button>
          <button class="btn primary" id="seeResult">Show my options</button>
        </div>
      </div>

      <!-- Results -->
      <div class="step stack" id="step4" hidden>
        <h2>Result</h2>
        <div id="resultPanel" class="result stack"></div>
        <div class="callout alert">
          <strong>Important Safety Guidance</strong>
          <ul>
            <li><strong>Do not place any e‑waste in household rubbish or recycling bins.</strong> E‑waste is banned from landfill in Victoria.</li>
            <li><strong>Handle batteries (including vapes) with care.</strong> Tape each battery’s terminals and keep them in a clear bag before transport. Lithium‑ion batteries can cause fires if damaged or binned.</li>
            <li><strong>Wipe personal data</strong> from phones, tablets and computers before drop‑off.</li>
          </ul>
          <div class="hint">Find more information here: 
            <a href="https://www.melbourne.vic.gov.au/a-z-waste-guide" target="_blank" rel="noopener">A–Z Waste Disposal Guide</a> and 
            <a href="https://www.melbourne.vic.gov.au/e-waste-and-chemicals" target="_blank" rel="noopener">E‑Waste Collection Points</a>.
          </div>
        </div>
        <p class="footer">This tool is limited to City of Melbourne locations. Always check a site’s page for current acceptance lists and opening hours.</p><p class="footer">For item‑by‑item advice, see the links above.</p>This tool is limited to City of Melbourne locations. Always check a site’s page for current acceptance lists and opening hours.</p>
      </div>
    </section>

    
  </main>

  <script>
  // ————— Data —————
  const CATEGORIES = [
    { id: 'batteries', label: 'Batteries / vapes', sizeRule: 'small-only', note: 'Keep terminals taped if loose batteries.' },
    { id: 'phones',    label: 'Phones, tablets, small gadgets', sizeRule: 'small-only' },
    { id: 'computers', label: 'Computers & accessories (keyboards, cables, drives)', sizeRule: 'small-or-medium' },
    { id: 'printer',   label: 'Printers / scanners / small office', sizeRule: 'medium' },
    { id: 'tv',        label: 'TVs / Monitors', sizeRule: 'large' },
    { id: 'appliance', label: 'Small appliances (kettle, toaster, vac, hairdryer)', sizeRule: 'small-or-medium' },
    { id: 'microwave', label: 'Microwaves or larger appliances', sizeRule: 'large' },
    { id: 'other',     label: 'Other electronic item (plug, cord or battery)', sizeRule: 'ask-size' },
  ];

  const SIZES = [
    { id: 'small',  label: 'Small — fits in a shoe box', tag: 'small' },
    { id: 'medium', label: 'Medium — backpack‑sized',   tag: 'medium' },
    { id: 'large',  label: 'Large — bulky / TV‑sized',   tag: 'large' },
  ];

  // City of Melbourne drop‑off network (curated)
  const LOCATIONS = [
    { id:'dynon',  name:'Dynon Road Waste & Recycling Centre', address:'437 Dynon Road, West Melbourne VIC 3003', accepts:['small','medium','large'], proof:'Show proof of City of Melbourne residency. No commercial quantities.', maps:"https://www.google.com/maps/?q=437+Dynon+Road+West+Melbourne+VIC+3003" },
    { id:'northmelblib', name:'North Melbourne Library', address:'66 Errol St, North Melbourne VIC 3051', accepts:['small'], maps:"https://www.google.com/maps/?q=66+Errol+St+North+Melbourne+VIC+3051" },
    { id:'eastmelblib',  name:'East Melbourne Library', address:'22 George St, East Melbourne VIC 3002', accepts:['small'], maps:"https://www.google.com/maps/?q=22+George+St+East+Melbourne+VIC+3002" },
    { id:'kathleensyme', name:'Kathleen Syme Library & Community Centre', address:'251 Faraday St, Carlton VIC 3053', accepts:['small'], maps:"https://www.google.com/maps/?q=251+Faraday+St+Carlton+VIC+3053" },
    { id:'kensington',   name:'Kensington Town Hall', address:'30–34 Bellair St, Kensington VIC 3031', accepts:['small'], maps:"https://www.google.com/maps/?q=30-34+Bellair+St+Kensington+VIC+3031" },
    { id:'dock',         name:'Library at The Dock', address:'107 Victoria Harbour Promenade, Docklands VIC 3008', accepts:['small'], maps:"https://www.google.com/maps/?q=Library+at+The+Dock+Docklands" },
    { id:'boyd',         name:'Boyd Community Hub', address:'207 City Rd, Southbank VIC 3006', accepts:['small'], maps:"https://www.google.com/maps/?q=Boyd+Community+Hub+Southbank" },
  ];

  // Preferred locations per suburb (rough ordering for convenience)
  const SUBURBS = {
    'Melbourne (CBD)':      ['dock','boyd','dynon','eastmelblib','kathleensyme'],
    'Docklands':            ['dock','dynon','boyd','eastmelblib'],
    'Southbank':            ['boyd','dock','dynon'],
    'West Melbourne':       ['dynon','northmelblib','dock'],
    'North Melbourne':      ['northmelblib','dynon','kathleensyme'],
    'Carlton':              ['kathleensyme','eastmelblib','dynon'],
    'Carlton North (part)': ['kathleensyme','eastmelblib','dynon'],
    'East Melbourne':       ['eastmelblib','kathleensyme','dynon'],
    'Kensington':           ['kensington','northmelblib','dynon'],
    'Parkville':            ['kathleensyme','northmelblib','dynon']
  };

  // ————— UI wiring —————
  const el = id => document.getElementById(id);
  const state = { category:null, size:null, suburb:null, usingGeo:false, userPos:null };

  // Build category buttons
  const catField = el('catField');
  CATEGORIES.forEach(c => {
    const l = document.createElement('label'); l.className='opt';
    l.innerHTML = `<input type="radio" name="cat" value="${c.id}"> <div><div><strong>${c.label}</strong></div>${c.note?`<div class="hint">${c.note}</div>`:''}</div>`;
    l.querySelector('input').addEventListener('change',()=>{
      state.category = c.id; goSize(c.sizeRule);
    });
    catField.appendChild(l);
  });

  function goSize(rule){
    // Preselect size options depending on rule
    const sizeField = el('sizeField');
    sizeField.innerHTML = '';
    const allowed = {
      'small-only': ['small'],
      'medium':     ['medium'],
      'large':      ['large'],
      'small-or-medium':['small','medium'],
      'ask-size':   ['small','medium','large']
    }[rule] || ['small','medium','large'];

    SIZES.filter(s=>allowed.includes(s.id)).forEach(s=>{
      const l = document.createElement('label'); l.className='opt';
      l.innerHTML = `<input type="radio" name="size" value="${s.id}"> <div><div><strong>${s.label}</strong></div></div>`;
      l.querySelector('input').addEventListener('change',()=>{
        state.size = s.id; el('step2').hidden = true; el('step3').hidden = false; buildSuburbSelect();
      });
      sizeField.appendChild(l);
    });

    el('step1').hidden = true; el('step2').hidden = false;
  }

  el('back1').onclick = ()=>{ el('step2').hidden = true; el('step1').hidden = false; };
  el('back2').onclick = ()=>{ el('step3').hidden = true; el('step2').hidden = false; };

  function buildSuburbSelect(){
    const sel = el('suburb'); sel.innerHTML = '';
    Object.keys(SUBURBS).forEach(name=>{
      const o = document.createElement('option'); o.value = name; o.textContent = name; sel.appendChild(o);
    });
  }

  el('geoBtn').onclick = async ()=>{
    if(!('geolocation' in navigator)){
      alert('Device location not available in this browser.'); return;
    }
    try{
      const pos = await new Promise((res,rej)=>navigator.geolocation.getCurrentPosition(res,rej,{enableHighAccuracy:true,timeout:10000}));
      state.userPos = {lat:pos.coords.latitude, lon:pos.coords.longitude};
      state.usingGeo = true; el('geoBtn').textContent = 'Location set ✔';
    }catch(e){ alert('Could not get your location. You can still select a suburb.'); }
  };

  el('seeResult').onclick = ()=>{
    state.suburb = el('suburb').value;
    renderResult();
    el('step3').hidden = true; el('step4').hidden = false;
  };

  el('restart').onclick = ()=>{ Object.assign(state,{category:null,size:null,suburb:null,usingGeo:false,userPos:null}); el('catField').querySelectorAll('input').forEach(i=>i.checked=false); el('step4').hidden=true; el('step1').hidden=false; };

  function renderResult(){
    const panel = el('resultPanel'); panel.innerHTML='';
    const acceptsTag = state.size; // small/medium/large

    // choose locations: if small → include all that accept small; if medium/large → prioritise Dynon
    let pool = LOCATIONS.filter(l => l.accepts.includes(acceptsTag));

    // order by suburb preference if available
    const order = SUBURBS[state.suburb] || [];
    pool.sort((a,b)=>order.indexOf(a.id)-order.indexOf(b.id));

    // build summary
    const summary = document.createElement('div');
    const big = (state.size==='large');
    const msg = big
      ? `This item is <span class="badge warn">LARGE</span>. Please use a staffed drop‑off (Dynon Road Centre recommended).`
      : `This item is <span class="badge ok">${state.size.toUpperCase()}</span>. Small e‑waste drop‑points are OK.`;
    summary.innerHTML = `<p>${msg}</p>`;
    panel.appendChild(summary);

    // list top 3 options
    pool.slice(0,3).forEach(l=>{
      const can = document.createElement('div'); can.className='loc';
      can.innerHTML = `
        <div>
          <h4>${l.name}</h4>
          <p>${l.address}</p>
          ${l.proof?`<p class="hint">${l.proof}</p>`:''}
          <div class="row" style="margin-top:6px">
            <a class="btn small" target="_blank" rel="noopener" href="${l.maps}">Open in Google Maps</a>
          </div>
        </div>`;
      panel.appendChild(can);
    });

    // tips
    const tips = document.createElement('div');
    tips.className='hint';
    tips.innerHTML = `<p>• Wipe personal data from phones/computers before drop‑off. • Tape the terminals of loose batteries. • Don’t put e‑waste in your kerbside bins.</p>`;
    panel.appendChild(tips);
  }

  // init suburb picker
  buildSuburbSelect();
  </script>
</body>
</html>
